<!DOCTYPE html>
<html>
<head>
    <title>ChWeKet - Chat Websocket</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <!-- mengubah tampilan -->
    <link src="stylesheet" href="style.css" >
    <!--bootstrap css & js-->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.7/dist/umd/popper.min.js" integrity="sha384-zYPOMqeu1DAVkHiLqWBUTcbYfZ8osu1Nd6Z89ify25QV9guujx43ITvfi12/QExE" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.min.js" integrity="sha384-Y4oOpwW3duJdCWv5ly8SCFYWqFDsfob/3GkgExXKV4idmbt98QcxXYs9UoXAB7BZ" crossorigin="anonymous"></script>
</head>
<body>
<h1>ChWeKet - Chat Websocket</h1>

<div class="speech-wrapper">
    <div class="bubble">
      <div class="txt">
        <p class="name"></p>
        <p class="pesan"></p>
        <!-- <span class="timestamp">10:20 pm</span> -->
      </div>
      <div class="bubble-arrow"></div>
    </div>
    <!--  Speech Bubble alternative -->
    <!-- <div class="bubble alt">
      <div class="txt">
        <p class="name alt">+62 857-7108-9755 <span> ~ username</span></p>
        <p class="message">Nice... this will work great for my new project.</p>
        <span class="timestamp">10:22 pm</span>
      </div>
      <div class="bubble-arrow alt"></div>
    </div> -->
  </div>

<input type="text" id="username" class="name" placeholder="Username" />
<input type="text" id="message" class="pesan" placeholder="Message" />
<button id="submit" type="button" class="btn btn-info">Send</button>


<script>
    $(function() {
        var socket = new WebSocket("wss://" + window.location.host + "/ws?username=" + encodeURIComponent($('#username').val()));

        socket.onmessage = function(event) {
            var message = JSON.parse(event.data);
            var content = "<strong>" + message.username + ":</strong> " + message.content + "<br />";
            $('#messages').append(content);
        };

        $('#submit').click(function() {
            var message = {
                username: $('#username').val(),
                content: $('#message').val()
            };
            socket.send(JSON.stringify(message));
            $('#message').val('');
        });
    });
</script>
</body>
</html>